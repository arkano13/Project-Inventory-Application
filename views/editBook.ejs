<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/booksListStyle.css">
</head>
<body>

    <nav>
        <a href="/" class="nav-brand">ðŸ“š Biblioteca</a>
        <ul class="nav-links">
            <li><a href="/createAuthors">Autores</a></li>
            <li><a href="/createPublishers">Editoriales</a></li>
            <li><a href="/booksList">Crear Libro</a></li>
            <li><a href="/createCategories">CategorÃ­as</a></li>
        </ul>
    </nav>

    <div class="page">
        <p class="page-label">Editando registro</p>
        <h1>Editar <span>Libro</span></h1>

        <div class="form-card">
            <form action="/<%= book.id %>/edit" method="POST">

                <div class="field">
                    <label for="name">TÃ­tulo del libro</label>
                    <input type="text" name="name" id="name" value="<%= book.name %>" required>
                </div>

                <div class="field">
                    <label for="author_id">Autor</label>
                  <select name="author_id" id="author_id" required>
    <option value="">â€” Selecciona un autor â€”</option>
    <% authors.forEach(author => { %>
        <option value="<%= author.id %>" <%= author.id === book.author_id ? 'selected' : '' %>>
            <%= author.name %>
        </option>
    <% }) %>
</select>
                </div>

                <div class="field">
                    <label for="publisher_id">Editorial</label>
                    <select name="publisher_id" id="publisher_id" required>
                        <option value="">â€” Selecciona una editorial â€”</option>
                        <% publisher.forEach(pub => { %>
                            <option value="<%= pub.id %>" <%= pub.id === book.publisher_id ? 'selected' : '' %>><%= pub.name %></option>
                        <% }) %>
                    </select>
                </div>

                <div class="field">
                    <fieldset>
                        <legend>CategorÃ­as</legend>
                        <div class="checkbox-grid">
                        <% categories.forEach(cat => { %>
    <div class="checkbox-item">
        <input 
            type="checkbox" 
            name="category_ids" 
            value="<%= cat.id %>"
            id="cat_<%= cat.id %>"
            <%= book.category_ids.includes(cat.id) ? 'checked' : '' %>
        >
        <label for="cat_<%= cat.id %>"><%= cat.name %></label>
    </div>
<% }) %>
                        </div>
                    </fieldset>
                </div>

                <div class="field">
                    <label for="release_date">Fecha de publicaciÃ³n</label>
                    <input type="date" name="release_date" id="release_date" value="<%= new Date(book.release_date).toISOString().split('T')[0] %>" required>
                </div>

                <button type="submit" class="btn-submit">Guardar Cambios</button>

            </form>
        </div>
    </div>

</body>
</html>
